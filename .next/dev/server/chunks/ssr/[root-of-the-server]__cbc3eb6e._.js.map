{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Amir/pay-as-play-project/lib/sdk.ts"],"sourcesContent":["/**\r\n * Play and Pay SDK Integration\r\n * Frontend wrapper for the SDK\r\n */\r\n\r\n// Import SDK modules\r\n// Using dynamic import for ES modules compatibility\r\nlet sdk: any = null;\r\n\r\nasync function loadSDK() {\r\n  if (!sdk) {\r\n    sdk = await import('../playandpay-sdk/src/index.js');\r\n  }\r\n  return sdk;\r\n}\r\n\r\nexport interface SDKConfig {\r\n  network?: 'testnet' | 'mainnet';\r\n  apiUrl?: string;\r\n  apiKey?: string;\r\n  providerAddr?: string;\r\n  platformAddr?: string;\r\n  platformFeePct?: number;\r\n  asaId?: number;\r\n  appId?: number;\r\n}\r\n\r\n/**\r\n * Initialize SDK\r\n */\r\nexport async function initSDK(config?: SDKConfig) {\r\n  try {\r\n    const sdkModule = await loadSDK();\r\n    const initConfig: any = {\r\n      network: config?.network || 'testnet',\r\n    };\r\n    \r\n    if (config?.apiUrl) initConfig.apiUrl = config.apiUrl;\r\n    if (config?.apiKey) initConfig.apiKey = config.apiKey;\r\n    if (config?.providerAddr) initConfig.providerAddr = config.providerAddr;\r\n    if (config?.platformAddr) initConfig.platformAddr = config.platformAddr;\r\n    if (config?.platformFeePct) initConfig.platformFeePct = config.platformFeePct;\r\n    if (config?.asaId) initConfig.asaId = config.asaId;\r\n    if (config?.appId) initConfig.appId = config.appId;\r\n    \r\n    await sdkModule.init(initConfig);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('SDK initialization error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Get SDK modules (lazy loaded)\r\n */\r\nexport async function getWallet() {\r\n  const sdkModule = await loadSDK();\r\n  return sdkModule.wallet;\r\n}\r\n\r\nexport async function getBilling() {\r\n  const sdkModule = await loadSDK();\r\n  return sdkModule.billing;\r\n}\r\n\r\nexport async function getAnalytics() {\r\n  const sdkModule = await loadSDK();\r\n  return sdkModule.analytics;\r\n}\r\n\r\nexport async function getWalletConnect() {\r\n  const sdkModule = await loadSDK();\r\n  return sdkModule.walletConnect;\r\n}\r\n\r\n// For backward compatibility, export as getters\r\nexport const wallet = new Proxy({} as any, {\r\n  get: (target, prop) => {\r\n    return async (...args: any[]) => {\r\n      const w = await getWallet();\r\n      return (w as any)[prop](...args);\r\n    };\r\n  },\r\n});\r\n\r\nexport const billing = new Proxy({} as any, {\r\n  get: (target, prop) => {\r\n    return async (...args: any[]) => {\r\n      const b = await getBilling();\r\n      return (b as any)[prop](...args);\r\n    };\r\n  },\r\n});\r\n\r\nexport const analytics = new Proxy({} as any, {\r\n  get: (target, prop) => {\r\n    return async (...args: any[]) => {\r\n      const a = await getAnalytics();\r\n      return (a as any)[prop](...args);\r\n    };\r\n  },\r\n});\r\n\r\nexport const walletConnect = new Proxy({} as any, {\r\n  get: (target, prop) => {\r\n    return async (...args: any[]) => {\r\n      const wc = await getWalletConnect();\r\n      return (wc as any)[prop](...args);\r\n    };\r\n  },\r\n});\r\n\r\nexport default loadSDK;\r\n\r\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED,qBAAqB;AACrB,oDAAoD;;;;;;;;;;;;;;;;;;;;;;;AACpD,IAAI,MAAW;AAEf,eAAe;IACb,IAAI,CAAC,KAAK;QACR,MAAM;IACR;IACA,OAAO;AACT;AAgBO,eAAe,QAAQ,MAAkB;IAC9C,IAAI;QACF,MAAM,YAAY,MAAM;QACxB,MAAM,aAAkB;YACtB,SAAS,QAAQ,WAAW;QAC9B;QAEA,IAAI,QAAQ,QAAQ,WAAW,MAAM,GAAG,OAAO,MAAM;QACrD,IAAI,QAAQ,QAAQ,WAAW,MAAM,GAAG,OAAO,MAAM;QACrD,IAAI,QAAQ,cAAc,WAAW,YAAY,GAAG,OAAO,YAAY;QACvE,IAAI,QAAQ,cAAc,WAAW,YAAY,GAAG,OAAO,YAAY;QACvE,IAAI,QAAQ,gBAAgB,WAAW,cAAc,GAAG,OAAO,cAAc;QAC7E,IAAI,QAAQ,OAAO,WAAW,KAAK,GAAG,OAAO,KAAK;QAClD,IAAI,QAAQ,OAAO,WAAW,KAAK,GAAG,OAAO,KAAK;QAElD,MAAM,UAAU,IAAI,CAAC;QACrB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;IACT;AACF;AAKO,eAAe;IACpB,MAAM,YAAY,MAAM;IACxB,OAAO,UAAU,MAAM;AACzB;AAEO,eAAe;IACpB,MAAM,YAAY,MAAM;IACxB,OAAO,UAAU,OAAO;AAC1B;AAEO,eAAe;IACpB,MAAM,YAAY,MAAM;IACxB,OAAO,UAAU,SAAS;AAC5B;AAEO,eAAe;IACpB,MAAM,YAAY,MAAM;IACxB,OAAO,UAAU,aAAa;AAChC;AAGO,MAAM,SAAS,IAAI,MAAM,CAAC,GAAU;IACzC,KAAK,CAAC,QAAQ;QACZ,OAAO,OAAO,GAAG;YACf,MAAM,IAAI,MAAM;YAChB,OAAO,AAAC,CAAS,CAAC,KAAK,IAAI;QAC7B;IACF;AACF;AAEO,MAAM,UAAU,IAAI,MAAM,CAAC,GAAU;IAC1C,KAAK,CAAC,QAAQ;QACZ,OAAO,OAAO,GAAG;YACf,MAAM,IAAI,MAAM;YAChB,OAAO,AAAC,CAAS,CAAC,KAAK,IAAI;QAC7B;IACF;AACF;AAEO,MAAM,YAAY,IAAI,MAAM,CAAC,GAAU;IAC5C,KAAK,CAAC,QAAQ;QACZ,OAAO,OAAO,GAAG;YACf,MAAM,IAAI,MAAM;YAChB,OAAO,AAAC,CAAS,CAAC,KAAK,IAAI;QAC7B;IACF;AACF;AAEO,MAAM,gBAAgB,IAAI,MAAM,CAAC,GAAU;IAChD,KAAK,CAAC,QAAQ;QACZ,OAAO,OAAO,GAAG;YACf,MAAM,KAAK,MAAM;YACjB,OAAO,AAAC,EAAU,CAAC,KAAK,IAAI;QAC9B;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Amir/pay-as-play-project/components/LowBalanceWarning.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getWallet, getWalletConnect } from '@/lib/sdk';\r\nimport Link from 'next/link';\r\n\r\ninterface LowBalanceWarningProps {\r\n  threshold?: number; // Minimum balance in PLY\r\n  onTopUp?: () => void;\r\n}\r\n\r\nexport default function LowBalanceWarning({\r\n  threshold = 10, // Default: 10 PLY\r\n  onTopUp,\r\n}: LowBalanceWarningProps) {\r\n  const [showWarning, setShowWarning] = useState(false);\r\n  const [balance, setBalance] = useState<number | null>(null);\r\n  const [isChecking, setIsChecking] = useState(true);\r\n\r\n  useEffect(() => {\r\n    checkBalance();\r\n    // Check balance every 30 seconds\r\n    const interval = setInterval(checkBalance, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  async function checkBalance() {\r\n    try {\r\n      const wc = await getWalletConnect();\r\n      if (!wc.isWalletConnected()) {\r\n        setIsChecking(false);\r\n        return;\r\n      }\r\n\r\n      const wallet = await getWallet();\r\n      const address = wc.getConnectedAddress();\r\n      if (!address) {\r\n        setIsChecking(false);\r\n        return;\r\n      }\r\n\r\n      const balanceData = await wallet.getBalance(address);\r\n      const currentBalance = balanceData.balance || 0;\r\n      setBalance(currentBalance);\r\n      setShowWarning(currentBalance < threshold);\r\n      setIsChecking(false);\r\n    } catch (err) {\r\n      console.error('Error checking balance:', err);\r\n      setIsChecking(false);\r\n    }\r\n  }\r\n\r\n  if (!showWarning || isChecking || balance === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-96\">\r\n      <div className=\"rounded-lg border border-yellow-300 bg-yellow-50 p-4 shadow-lg dark:border-yellow-700 dark:bg-yellow-900/20\">\r\n        <div className=\"mb-3 flex items-start justify-between\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"text-2xl\">⚠️</div>\r\n            <div>\r\n              <h3 className=\"mb-1 font-semibold text-yellow-900 dark:text-yellow-100\">\r\n                Low Balance Warning\r\n              </h3>\r\n              <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                Your balance is low: <strong>{balance.toFixed(2)} PLY</strong>\r\n              </p>\r\n              <p className=\"mt-1 text-xs text-yellow-700 dark:text-yellow-300\">\r\n                Top up now to avoid interruption\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={() => setShowWarning(false)}\r\n            className=\"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-200\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Link\r\n            href=\"/wallet\"\r\n            onClick={() => {\r\n              setShowWarning(false);\r\n              onTopUp?.();\r\n            }}\r\n            className=\"flex-1 rounded-lg bg-yellow-500 px-4 py-2 text-center text-sm font-medium text-white transition-colors hover:bg-yellow-600\"\r\n          >\r\n            Top Up Now\r\n          </Link>\r\n          <button\r\n            onClick={() => setShowWarning(false)}\r\n            className=\"rounded-lg border border-yellow-300 bg-white px-4 py-2 text-sm font-medium text-yellow-700 transition-colors hover:bg-yellow-50 dark:border-yellow-700 dark:bg-zinc-800 dark:text-yellow-300\"\r\n          >\r\n            Later\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,kBAAkB,EACxC,YAAY,EAAE,EACd,OAAO,EACgB;IACvB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,IAAA,kNAAS,EAAC;QACR;QACA,iCAAiC;QACjC,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,eAAe;QACb,IAAI;YACF,MAAM,KAAK,MAAM,IAAA,8HAAgB;YACjC,IAAI,CAAC,GAAG,iBAAiB,IAAI;gBAC3B,cAAc;gBACd;YACF;YAEA,MAAM,SAAS,MAAM,IAAA,uHAAS;YAC9B,MAAM,UAAU,GAAG,mBAAmB;YACtC,IAAI,CAAC,SAAS;gBACZ,cAAc;gBACd;YACF;YAEA,MAAM,cAAc,MAAM,OAAO,UAAU,CAAC;YAC5C,MAAM,iBAAiB,YAAY,OAAO,IAAI;YAC9C,WAAW;YACX,eAAe,iBAAiB;YAChC,cAAc;QAChB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,cAAc;QAChB;IACF;IAEA,IAAI,CAAC,eAAe,cAAc,YAAY,MAAM;QAClD,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CAAW;;;;;;8CAC1B,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAA0D;;;;;;sDAGxE,8OAAC;4CAAE,WAAU;;gDAA+C;8DACrC,8OAAC;;wDAAQ,QAAQ,OAAO,CAAC;wDAAG;;;;;;;;;;;;;sDAEnD,8OAAC;4CAAE,WAAU;sDAAoD;;;;;;;;;;;;;;;;;;sCAKrE,8OAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;sCACX;;;;;;;;;;;;8BAIH,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uKAAI;4BACH,MAAK;4BACL,SAAS;gCACP,eAAe;gCACf;4BACF;4BACA,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS,IAAM,eAAe;4BAC9B,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}