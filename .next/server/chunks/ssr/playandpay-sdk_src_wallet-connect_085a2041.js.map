{"version":3,"sources":["turbopack:///[project]/playandpay-sdk/src/config.js","turbopack:///[project]/playandpay-sdk/src/utils.js","turbopack:///[project]/playandpay-sdk/src/wallet-connect.js"],"sourcesContent":["/**\r\n * Play and Pay SDK - Configuration Module\r\n * Handles API base URL, network settings, and environment configuration\r\n */\r\n\r\nlet config = null;\r\n\r\n/**\r\n * Default configuration\r\n */\r\nconst DEFAULT_CONFIG = {\r\n  apiBaseUrl: 'http://localhost:8080',\r\n  network: 'testnet', // 'testnet' | 'mainnet'\r\n  algodUrl: 'https://testnet-api.algonode.cloud',\r\n  algodToken: '',\r\n  algodPort: '',\r\n  indexerUrl: 'https://testnet-idx.algonode.cloud',\r\n  indexerToken: '',\r\n  indexerPort: '',\r\n  asaId: null, // PlayCoin ASA ID\r\n  currency: 'PLY',\r\n  ratePerMinute: 0.02, // Default rate in EUR\r\n  autoTopupThreshold: 1.00, // EUR\r\n  appId: null, // Smart Contract App ID\r\n  providerAddr: null,\r\n  platformAddr: null,\r\n  platformFeePct: 500, // 5% = 500 basis points\r\n  demoMode: false\r\n};\r\n\r\n/**\r\n * Initialize configuration\r\n * @param {Object} userConfig - User-provided configuration\r\n * @returns {Object} Configuration object\r\n */\r\nexport function initConfig(userConfig = {}) {\r\n  // Load from environment variables if available\r\n  const envConfig = {\r\n    apiBaseUrl: process.env.PLAYANDPAY_API_URL || DEFAULT_CONFIG.apiBaseUrl,\r\n    network: process.env.PLAYANDPAY_NETWORK || DEFAULT_CONFIG.network,\r\n    algodUrl: process.env.PLAYANDPAY_ALGOD_URL || DEFAULT_CONFIG.algodUrl,\r\n    indexerUrl: process.env.PLAYANDPAY_INDEXER_URL || DEFAULT_CONFIG.indexerUrl,\r\n    asaId: process.env.PLAYANDPAY_ASA_ID ? parseInt(process.env.PLAYANDPAY_ASA_ID) : null,\r\n    appId: process.env.PLAYANDPAY_APP_ID ? parseInt(process.env.PLAYANDPAY_APP_ID) : null,\r\n    providerAddr: process.env.PLAYANDPAY_PROVIDER_ADDR || null,\r\n    platformAddr: process.env.PLAYANDPAY_PLATFORM_ADDR || null,\r\n    apiKey: process.env.PLAYANDPAY_API_KEY || null\r\n  };\r\n\r\n  // Merge: userConfig > envConfig > DEFAULT_CONFIG\r\n  config = {\r\n    ...DEFAULT_CONFIG,\r\n    ...envConfig,\r\n    ...userConfig\r\n  };\r\n\r\n  // Set network-specific URLs if network changed\r\n  if (config.network === 'mainnet') {\r\n    config.algodUrl = config.algodUrl || 'https://mainnet-api.algonode.cloud';\r\n    config.indexerUrl = config.indexerUrl || 'https://mainnet-idx.algonode.cloud';\r\n  }\r\n\r\n  // Enable demo mode if critical config is missing\r\n  if (!config.asaId || !config.providerAddr) {\r\n    config.demoMode = true;\r\n  }\r\n\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get current configuration\r\n * @returns {Object} Configuration object\r\n */\r\nexport function getConfig() {\r\n  if (!config) {\r\n    console.warn('⚠️  Config not initialized. Using defaults.');\r\n    return initConfig();\r\n  }\r\n  return config;\r\n}\r\n\r\n/**\r\n * Update configuration\r\n * @param {Object} updates - Configuration updates\r\n */\r\nexport function updateConfig(updates) {\r\n  if (!config) {\r\n    config = { ...DEFAULT_CONFIG };\r\n  }\r\n  config = { ...config, ...updates };\r\n  return config;\r\n}\r\n\r\n/**\r\n * Check if demo mode is enabled\r\n * @returns {boolean}\r\n */\r\nexport function isDemoMode() {\r\n  return getConfig().demoMode;\r\n}\r\n\r\n/**\r\n * Get API base URL\r\n * @returns {string}\r\n */\r\nexport function getApiBaseUrl() {\r\n  return getConfig().apiBaseUrl;\r\n}\r\n\r\n/**\r\n * Get Algorand network configuration\r\n * @returns {Object}\r\n */\r\nexport function getAlgorandConfig() {\r\n  const cfg = getConfig();\r\n  return {\r\n    algodUrl: cfg.algodUrl,\r\n    algodToken: cfg.algodToken,\r\n    algodPort: cfg.algodPort,\r\n    indexerUrl: cfg.indexerUrl,\r\n    indexerToken: cfg.indexerToken,\r\n    indexerPort: cfg.indexerPort\r\n  };\r\n}\r\n\r\nexport default {\r\n  initConfig,\r\n  getConfig,\r\n  updateConfig,\r\n  isDemoMode,\r\n  getApiBaseUrl,\r\n  getAlgorandConfig\r\n};\r\n\r\n","/**\r\n * Play and Pay SDK - Utility Functions\r\n * Logger, formatters, and helper functions\r\n */\r\n\r\n/**\r\n * Logger utility\r\n */\r\nexport const logger = {\r\n  enabled: process.env.NODE_ENV !== 'production',\r\n  \r\n  log(...args) {\r\n    if (this.enabled) {\r\n      console.log('[PlayAndPay]', ...args);\r\n    }\r\n  },\r\n  \r\n  error(...args) {\r\n    console.error('[PlayAndPay] ERROR:', ...args);\r\n  },\r\n  \r\n  warn(...args) {\r\n    if (this.enabled) {\r\n      console.warn('[PlayAndPay] WARN:', ...args);\r\n    }\r\n  },\r\n  \r\n  debug(...args) {\r\n    if (this.enabled && process.env.DEBUG) {\r\n      console.debug('[PlayAndPay] DEBUG:', ...args);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Format amount from minor units to major units\r\n * @param {number} minor - Amount in minor units (cents)\r\n * @param {number} decimals - Decimal places (default: 2)\r\n * @returns {number}\r\n */\r\nexport function formatAmount(minor, decimals = 2) {\r\n  return minor / Math.pow(10, decimals);\r\n}\r\n\r\n/**\r\n * Convert EUR to PLY minor units\r\n * @param {number} eur - Amount in EUR\r\n * @param {number} rate - Conversion rate (1 PLY = rate EUR, default: 0.01)\r\n * @returns {number} PLY minor units\r\n */\r\nexport function eurToPLYMinor(eur, rate = 0.01) {\r\n  return Math.round(eur / rate);\r\n}\r\n\r\n/**\r\n * Convert PLY minor units to EUR\r\n * @param {number} plyMinor - Amount in PLY minor units\r\n * @param {number} rate - Conversion rate (1 PLY = rate EUR, default: 0.01)\r\n * @returns {number} EUR amount\r\n */\r\nexport function plyMinorToEUR(plyMinor, rate = 0.01) {\r\n  return plyMinor * rate;\r\n}\r\n\r\n/**\r\n * Convert minutes to milliseconds\r\n * @param {number} minutes\r\n * @returns {number}\r\n */\r\nexport function minutesToMs(minutes) {\r\n  return minutes * 60 * 1000;\r\n}\r\n\r\n/**\r\n * Convert milliseconds to minutes\r\n * @param {number} ms\r\n * @returns {number}\r\n */\r\nexport function msToMinutes(ms) {\r\n  return ms / (60 * 1000);\r\n}\r\n\r\n/**\r\n * Generate unique ID\r\n * @param {string} prefix - Prefix for ID\r\n * @returns {string}\r\n */\r\nexport function generateId(prefix = 'id') {\r\n  return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Generate tick ID for idempotency\r\n * @param {string} sessionId - Session ID\r\n * @param {number} timestamp - Timestamp\r\n * @returns {string}\r\n */\r\nexport function generateTickId(sessionId, timestamp = Date.now()) {\r\n  return `tick_${sessionId}_${timestamp}_${Math.random().toString(36).substr(2, 6)}`;\r\n}\r\n\r\n/**\r\n * Format duration (ms) to human-readable string\r\n * @param {number} ms - Duration in milliseconds\r\n * @returns {string}\r\n */\r\nexport function formatDuration(ms) {\r\n  const seconds = Math.floor(ms / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  \r\n  if (hours > 0) {\r\n    return `${hours}h ${minutes % 60}m ${seconds % 60}s`;\r\n  } else if (minutes > 0) {\r\n    return `${minutes}m ${seconds % 60}s`;\r\n  } else {\r\n    return `${seconds}s`;\r\n  }\r\n}\r\n\r\n/**\r\n * Format currency amount\r\n * @param {number} amount - Amount\r\n * @param {string} currency - Currency code (default: 'EUR')\r\n * @returns {string}\r\n */\r\nexport function formatCurrency(amount, currency = 'EUR') {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: currency\r\n  }).format(amount);\r\n}\r\n\r\n/**\r\n * Sleep/delay utility\r\n * @param {number} ms - Milliseconds to wait\r\n * @returns {Promise}\r\n */\r\nexport function sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * Retry utility\r\n * @param {Function} fn - Function to retry\r\n * @param {number} maxRetries - Maximum retries\r\n * @param {number} delay - Delay between retries (ms)\r\n * @returns {Promise}\r\n */\r\nexport async function retry(fn, maxRetries = 3, delay = 1000) {\r\n  for (let i = 0; i < maxRetries; i++) {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      if (i === maxRetries - 1) throw error;\r\n      logger.warn(`Retry ${i + 1}/${maxRetries} after error:`, error.message);\r\n      await sleep(delay * (i + 1)); // Exponential backoff\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Validate address format (Algorand)\r\n * @param {string} address - Address to validate\r\n * @returns {boolean}\r\n */\r\nexport function isValidAddress(address) {\r\n  if (!address || typeof address !== 'string') return false;\r\n  // Algorand addresses are 58 characters, base32 encoded\r\n  return /^[A-Z2-7]{58}$/.test(address);\r\n}\r\n\r\n/**\r\n * Validate session ID format\r\n * @param {string} sessionId - Session ID to validate\r\n * @returns {boolean}\r\n */\r\nexport function isValidSessionId(sessionId) {\r\n  if (!sessionId || typeof sessionId !== 'string') return false;\r\n  return /^session_[a-zA-Z0-9_]+$/.test(sessionId);\r\n}\r\n\r\nexport default {\r\n  logger,\r\n  formatAmount,\r\n  eurToPLYMinor,\r\n  plyMinorToEUR,\r\n  minutesToMs,\r\n  msToMinutes,\r\n  generateId,\r\n  generateTickId,\r\n  formatDuration,\r\n  formatCurrency,\r\n  sleep,\r\n  retry,\r\n  isValidAddress,\r\n  isValidSessionId\r\n};\r\n\r\n","/**\r\n * Play and Pay SDK - WalletConnect Module\r\n * Handles Pera Wallet connection and user-side transaction signing\r\n */\r\n\r\nimport { getConfig } from './config.js';\r\nimport { logger } from './utils.js';\r\n\r\nlet peraWallet = null;\r\nlet isConnected = false;\r\nlet connectedAddress = null;\r\n\r\n/**\r\n * Initialize Pera Wallet\r\n */\r\nexport async function initPeraWallet() {\r\n    if (typeof window === 'undefined') {\r\n        logger.warn('Pera Wallet can only be used in browser environment');\r\n        return null;\r\n    }\r\n\r\n    try {\r\n        // Dynamic import for browser only\r\n        const { PeraWalletConnect } = await import('@perawallet/connect');\r\n        peraWallet = new PeraWalletConnect({\r\n            chainId: getConfig().network === 'mainnet' ? 416002 : 416003, // TestNet\r\n            shouldShowSignTxnToast: true\r\n        });\r\n        \r\n        logger.debug('Pera Wallet initialized');\r\n        return peraWallet;\r\n    } catch (error) {\r\n        logger.error('Error initializing Pera Wallet:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Connect to Pera Wallet\r\n * @returns {Promise<string>} Connected wallet address\r\n */\r\nexport async function connectWallet() {\r\n    if (!peraWallet) {\r\n        peraWallet = await initPeraWallet();\r\n    }\r\n\r\n    if (!peraWallet) {\r\n        throw new Error('Pera Wallet not available. Make sure @perawallet/connect is installed.');\r\n    }\r\n\r\n    try {\r\n        const accounts = await peraWallet.connect();\r\n        \r\n        if (accounts && accounts.length > 0) {\r\n            isConnected = true;\r\n            connectedAddress = accounts[0];\r\n            logger.debug('Wallet connected:', connectedAddress);\r\n            return connectedAddress;\r\n        } else {\r\n            throw new Error('No accounts returned from wallet');\r\n        }\r\n    } catch (error) {\r\n        if (error.data?.type !== 'CONNECT_MODAL_CLOSED') {\r\n            logger.error('Error connecting wallet:', error);\r\n        }\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Disconnect from Pera Wallet\r\n */\r\nexport async function disconnectWallet() {\r\n    if (peraWallet) {\r\n        try {\r\n            await peraWallet.disconnect();\r\n            isConnected = false;\r\n            connectedAddress = null;\r\n            logger.debug('Wallet disconnected');\r\n        } catch (error) {\r\n            logger.error('Error disconnecting wallet:', error);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Get connected wallet address\r\n * @returns {string|null} Connected address or null\r\n */\r\nexport function getConnectedAddress() {\r\n    return connectedAddress;\r\n}\r\n\r\n/**\r\n * Check if wallet is connected\r\n * @returns {boolean}\r\n */\r\nexport function isWalletConnected() {\r\n    return isConnected && connectedAddress !== null;\r\n}\r\n\r\n/**\r\n * Sign transactions using Pera Wallet\r\n * @param {Array} transactions - Array of unsigned transactions\r\n * @returns {Promise<Array>} Array of signed transactions\r\n */\r\nexport async function signTransactions(transactions) {\r\n    if (!isConnected || !peraWallet) {\r\n        throw new Error('Wallet not connected. Call connectWallet() first.');\r\n    }\r\n\r\n    try {\r\n        // Pera Wallet expects array of transactions\r\n        const signedTxns = await peraWallet.signTransaction(Array.isArray(transactions) ? transactions : [transactions]);\r\n        logger.debug('Transactions signed successfully');\r\n        return Array.isArray(signedTxns) ? signedTxns : [signedTxns];\r\n    } catch (error) {\r\n        if (error.data?.type !== 'SIGN_MODAL_CLOSED') {\r\n            logger.error('Error signing transactions:', error);\r\n        }\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Sign a single transaction\r\n * @param {Object} transaction - Unsigned transaction object\r\n * @returns {Promise<Uint8Array>} Signed transaction\r\n */\r\nexport async function signTransaction(transaction) {\r\n    const signed = await signTransactions([transaction]);\r\n    return signed[0];\r\n}\r\n\r\n/**\r\n * Reconnect to previously connected wallet\r\n */\r\nexport async function reconnectWallet() {\r\n    if (!peraWallet) {\r\n        peraWallet = await initPeraWallet();\r\n    }\r\n\r\n    if (peraWallet) {\r\n        try {\r\n            const accounts = await peraWallet.reconnectSession();\r\n            if (accounts && accounts.length > 0) {\r\n                isConnected = true;\r\n                connectedAddress = accounts[0];\r\n                logger.debug('Wallet reconnected:', connectedAddress);\r\n                return connectedAddress;\r\n            }\r\n        } catch (error) {\r\n            logger.debug('No previous session to reconnect');\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    return null;\r\n}\r\n\r\n/**\r\n * Get wallet connector object (for use with SDK)\r\n * @returns {Object} Wallet connector with signTransaction method\r\n */\r\nexport function getWalletConnector() {\r\n    if (!isConnected) {\r\n        throw new Error('Wallet not connected');\r\n    }\r\n\r\n    return {\r\n        address: connectedAddress,\r\n        signTransaction: async (txn) => {\r\n            return await signTransaction(txn);\r\n        },\r\n        signTransactions: async (txns) => {\r\n            return await signTransactions(txns);\r\n        }\r\n    };\r\n}\r\n\r\nexport default {\r\n    initPeraWallet,\r\n    connectWallet,\r\n    disconnectWallet,\r\n    getConnectedAddress,\r\n    isWalletConnected,\r\n    signTransactions,\r\n    signTransaction,\r\n    reconnectWallet,\r\n    getWalletConnector\r\n};\r\n\r\n"],"names":[],"mappings":"iDAKA,IAAI,EAAS,KAKP,EAAiB,CACrB,WAAY,wBACZ,QAAS,UACT,SAAU,qCACV,WAAY,GACZ,UAAW,GACX,WAAY,qCACZ,aAAc,GACd,YAAa,GACb,MAAO,KACP,SAAU,MACV,cAAe,IACf,mBAAoB,EACpB,MAAO,KACP,aAAc,KACd,aAAc,KACd,eAAgB,IAChB,UAAU,CACZ,EAOO,SAAS,EAAW,EAAa,CAAC,CAAC,EAExC,IAAM,EAAY,CAChB,WAAY,QAAQ,GAAG,CAAC,kBAAkB,EAAI,EAAe,UAAU,CACvE,QAAS,QAAQ,GAAG,CAAC,kBAAkB,EAAI,EAAe,OAAO,CACjE,SAAU,QAAQ,GAAG,CAAC,oBAAoB,EAAI,EAAe,QAAQ,CACrE,WAAY,QAAQ,GAAG,CAAC,sBAAsB,EAAI,EAAe,UAAU,CAC3E,MAAO,QAAQ,GAAG,CAAC,iBAAiB,CAAG,SAAS,QAAQ,GAAG,CAAC,iBAAiB,EAAI,KACjF,MAAO,QAAQ,GAAG,CAAC,iBAAiB,CAAG,SAAS,QAAQ,GAAG,CAAC,iBAAiB,EAAI,KACjF,aAAc,QAAQ,GAAG,CAAC,wBAAwB,EAAI,KACtD,aAAc,QAAQ,GAAG,CAAC,wBAAwB,EAAI,KACtD,OAAQ,QAAQ,GAAG,CAAC,kBAAkB,EAAI,IAC5C,EAoBA,MAVuB,WAAW,CAA9B,CAPJ,EAAS,CACP,GAAG,CAAc,CACjB,GAAG,CAAS,CACZ,GAAG,CAAU,CACf,EAGW,OAAO,GAChB,EAAO,QAAQ,CAAG,EAAO,QAAQ,EAAI,qCACrC,EAAO,UAAU,CAAG,EAAO,UAAU,EAAI,sCAIvC,AAAC,EAAO,KAAK,EAAK,EAAD,AAAQ,YAAY,EAAE,CACzC,EAAO,QAAQ,EAAG,CAAA,EAGb,CACT,CAMO,SAAS,WACd,AAAK,IAAD,AACF,IADW,IACH,IAAI,CAAC,+CACN,IAGX,CAkBO,SAAS,IACd,OAAO,IAAY,QACrB,AAD6B,CAetB,SAAS,IACd,IAAM,EAAM,IACZ,MAAO,CACL,SAAU,EAAI,QAAQ,CACtB,WAAY,EAAI,UAAU,CAC1B,UAAW,EAAI,SAAS,CACxB,WAAY,EAAI,UAAU,CAC1B,aAAc,EAAI,YAAY,CAC9B,YAAa,EAAI,WAAW,AAC9B,CACF,gGCpHO,IAAM,EAAS,CACpB,SAAS,EAET,IAAI,GAAG,CAAI,EACL,IAAI,CAAC,OAAO,EAAE,AAChB,QAAQ,GAAG,CAAC,aAJkB,KAIC,EAEnC,EAEA,MAAM,GAAG,CAAI,EACX,QAAQ,KAAK,CAAC,yBAA0B,EAC1C,EAEA,KAAK,GAAG,CAAI,EACN,IAAI,CAAC,OAAO,EAAE,AAChB,QAAQ,IAAI,CAAC,wBAAyB,EAE1C,EAEA,MAAM,GAAG,CAAI,EACP,IAAI,CAAC,OAAO,EAAI,QAAQ,GAAG,CAAC,KAAK,EAAE,AACrC,QAAQ,KAAK,CAAC,yBAA0B,EAE5C,CACF,EAQO,SAAS,EAAa,CAAK,CAAE,EAAW,CAAC,EAC9C,OAAO,EAAQ,KAAK,GAAG,CAAC,GAAI,EAC9B,CAQO,SAAS,EAAc,CAAG,CAAE,EAAO,GAAI,EAC5C,OAAO,KAAK,KAAK,CAAC,EAAM,EAC1B,CAQO,SAAS,EAAc,CAAQ,CAAE,EAAO,GAAI,EACjD,OAAO,EAAW,CACpB,CAOO,SAAS,EAAY,CAAO,EACjC,OAAO,AAAU,KAAK,GACxB,CAOO,SAAS,EAAY,CAAE,EAC5B,OAAO,EAAM,GAAD,AACd,CAOO,CARa,IAAI,IAQR,EAAW,EAAS,IAAI,EACtC,MAAO,CAAA,EAAG,EAAO,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,EAAG,GAAA,CAAI,AAC7E,CAQO,SAAS,EAAe,CAAS,CAAE,EAAY,KAAK,GAAG,EAAE,EAC9D,MAAO,CAAC,KAAK,EAAE,EAAU,CAAC,EAAE,EAAU,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,EAAG,GAAA,CAAI,AACpF,CAOO,SAAS,EAAe,CAAE,EAC/B,IAAM,EAAU,KAAK,KAAK,CAAC,EAAK,KAC1B,EAAU,KAAK,KAAK,CAAC,EAAU,IAC/B,EAAQ,KAAK,KAAK,CAAC,EAAU,WAEnC,AAAI,EAAQ,EACH,CAAA,AADM,EACH,EAAM,EAAE,EAAE,EAAU,GAAG,EAAE,EAAE,EAAU,GAAG,CAAC,CAAC,CAC3C,EAAU,EACZ,CADe,AACf,EAAG,EAAQ,EAAE,EAAE,EAAU,GAAG,CAAC,CAAC,CAE9B,CAAA,EAAG,EAAQ,CAAC,CAAC,AAExB,CAQO,SAAS,EAAe,CAAM,CAAE,EAAW,KAAK,EACrD,OAAO,IAAI,KAAK,YAAY,CAAC,QAAS,CACpC,MAAO,WACP,SAAU,CACZ,GAAG,MAAM,CAAC,EACZ,CAOO,SAAS,EAAM,CAAE,EACtB,OAAO,IAAI,QAAQ,GAAW,WAAW,EAAS,GACpD,CASO,eAAe,EAAM,CAAE,CAAE,EAAa,CAAC,CAAE,EAAQ,GAAI,EAC1D,IAAK,IAAI,EAAI,EAAG,EAAI,EAAY,IAAK,AACnC,GAAI,CACF,OAAO,MAAM,GACf,CAAE,MAAO,EAAO,CACd,GAAI,IAAM,EAAa,EAAG,MAAM,EAChC,EAAO,IAAI,CAAC,CAAC,MAAM,EAAE,EAAI,EAAE,CAAC,EAAE,EAAW,aAAa,CAAC,CAAE,EAAM,OAAO,EACtE,MAAM,EAAM,GAAS,GAAI,CAAC,CAAN,AACtB,CAEJ,CAOO,CAV6B,QAUpB,EAAe,CAAO,QACpC,CAAI,CAAC,CAXmD,EAWrB,UAAnB,AAA6B,OAAO,AAA7B,GAEhB,iBAAiB,IAAI,CAAC,EAC/B,CAOO,SAAS,EAAiB,CAAS,QACxC,CAAI,CAAC,GAAkC,UAArB,AAA+B,OAAxB,AAA+B,GACjD,0BAA0B,IAAI,CAAC,EACxC,kBAEe,QACb,eACA,gBACA,gBACA,cACA,cACA,aACA,iBACA,iBACA,iBACA,QACA,QACA,iBACA,mBACA,CACF,mSC7LA,IAAI,EAAa,KACb,GAAc,EACd,EAAmB,KAKhB,eAAe,IAGd,OADA,EAAO,IAAI,CAAC,uDACL,IAiBf,CAMO,eAAe,IAKlB,GAJK,AAAD,IACA,EAAa,MAAM,AADN,GACM,EAGnB,CAAC,EACD,MAAM,AAAI,IADG,EACG,0EAGpB,GAAI,CACA,IAAM,EAAW,MAAM,EAAW,OAAO,GAEzC,GAAI,GAAY,EAAS,MAAM,CAAG,EAI9B,CAJiC,MACjC,GAAc,EACd,EAAmB,CAAQ,CAAC,EAAE,CAC9B,EAAO,KAAK,CAAC,oBAAqB,GAC3B,CAEP,OAAM,AAAI,MAAM,mCAExB,CAAE,MAAO,EAAO,CAIZ,MAHI,EAAM,IAAI,EAAE,OAAS,wBAAwB,AAC7C,EAAO,KAAK,CAAC,2BAA4B,GAEvC,CACV,CACJ,CAKO,eAAe,IAClB,GAAI,EACA,GAAI,CACA,MAFQ,AAEF,EAAW,UAAU,GAC3B,GAAc,EACd,EAAmB,KACnB,EAAO,KAAK,CAAC,sBACjB,CAAE,MAAO,EAAO,CACZ,EAAO,KAAK,CAAC,8BAA+B,EAChD,CAER,CAMO,SAAS,IACZ,OAAO,CACX,CAMO,SAAS,IACZ,OAAO,GAAe,AAAqB,QAC/C,CAOO,eAAe,EAAiB,CAAY,EAC/C,GAAI,CAAC,GAAe,CAAC,EACjB,MAAM,AAAI,IADmB,EACb,qDAGpB,GAAI,CAEA,IAAM,EAAa,MAAM,EAAW,eAAe,CAAC,MAAM,OAAO,CAAC,GAAgB,EAAe,CAAC,EAAa,EAE/G,OADA,EAAO,KAAK,CAAC,oCACN,MAAM,OAAO,CAAC,GAAc,EAAa,CAAC,EAAW,AAChE,CAAE,MAAO,EAAO,CAIZ,MAHI,EAAM,IAAI,EAAE,OAAS,qBAAqB,AAC1C,EAAO,KAAK,CAAC,8BAA+B,GAE1C,CACV,CACJ,CAOO,eAAe,EAAgB,CAAW,EAE7C,MAAO,CADQ,MAAM,EAAiB,CAAC,GAAY,CACtC,CAAC,EAAE,AACpB,CAKO,eAAe,IAKlB,GAJI,AAAC,IACD,EAAa,MAAM,AADN,GACM,EAGnB,EACA,GAAI,CACA,IAAM,EAFE,AAES,MAAM,EAAW,gBAAgB,GAClD,GAAI,GAAY,EAAS,MAAM,CAAG,EAI9B,CAJiC,MACjC,GAAc,EACd,EAAmB,CAAQ,CAAC,EAAE,CAC9B,EAAO,KAAK,CAAC,sBAAuB,GAC7B,CAEf,CAAE,MAAO,EAAO,CACZ,EAAO,KAAK,CAAC,mCAEjB,CAGJ,OAAO,IACX,CAMO,SAAS,IACZ,GAAI,CAAC,EACD,MAAM,AAAI,KADI,CACE,wBAGpB,MAAO,CACH,QAAS,EACT,gBAAiB,MAAO,GACb,MAAM,EAAgB,GAEjC,iBAAkB,MAAO,GACd,MAAM,EAAiB,EAEtC,CACJ,wCAEe,gBACX,EACA,iCACA,sBACA,oBACA,mBACA,kBACA,kBACA,qBACA,CACJ"}