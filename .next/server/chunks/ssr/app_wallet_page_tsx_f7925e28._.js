module.exports=[710,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(67594),e=a.i(38847),f=a.i(38246);function g({balance:a,address:e,onClose:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null);async function q(){if(!e)return void p("Wallet not connected");let b=parseFloat(i);if(isNaN(b)||b<=0)return void p("Please enter a valid amount");if(b<.001)return void p("Minimum withdrawal amount is 0.001 PLY");if(b>a)return void p("Insufficient balance");if(!k||k.length<10)return void p("Please enter a valid destination address");if(!/^[A-Z2-7]{58}$/.test(k))return void p("Invalid Algorand address format. Address must be 58 characters and base32 encoded.");n(!0),p(null);try{let a=await (0,d.getWallet)(),c=(await (0,d.getWalletConnect)()).getWalletConnector(),e=Math.floor(1e6*b);await a.transfer({to:k,amount:e,signer:c}),alert(`Successfully withdrew ${b} PLY to ${k.slice(0,8)}...`),h(!1),j(""),l(""),f?.()}catch(a){p(a.message||"Withdrawal failed. Please try again.")}finally{n(!1)}}return(0,c.useEffect)(()=>{if(g)return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a);function a(a){"Escape"===a.key&&(h(!1),p(null),j(""),l(""))}},[g]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>h(!0),className:"rounded-lg border-2 border-zinc-300 bg-white px-6 py-3 font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100 dark:hover:bg-zinc-700",children:"Withdraw PLY"}),g&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-200 bg-white p-6 shadow-lg dark:border-zinc-800 dark:bg-zinc-900",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Withdraw PLY"}),(0,b.jsx)("button",{onClick:()=>{h(!1),p(null),j(""),l("")},className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300","aria-label":"Close modal",children:"âœ•"})]}),o&&(0,b.jsx)("div",{id:"withdraw-error",role:"alert",className:"mb-4 rounded-lg bg-red-50 p-3 text-sm text-red-600 dark:bg-red-900/20 dark:text-red-400",children:o}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Available Balance"}),(0,b.jsxs)("div",{className:"rounded-lg border border-zinc-300 bg-zinc-50 p-3 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:[a.toFixed(2)," PLY"]}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["â‰ˆ â‚¬",(.02*a).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{htmlFor:"withdraw-amount",className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Amount to Withdraw"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{id:"withdraw-amount",type:"number",value:i,onChange:a=>j(a.target.value),placeholder:"0.00",step:"0.01",min:"0",max:a,"aria-label":"Withdrawal amount","aria-describedby":o?"withdraw-error":void 0,className:"flex-1 rounded-lg border border-zinc-300 bg-white px-4 py-2 text-zinc-900 placeholder-zinc-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100"}),(0,b.jsx)("button",{onClick:function(){j(a.toFixed(2))},className:"rounded-lg border border-zinc-300 bg-white px-4 py-2 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:"Max"})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{htmlFor:"withdraw-destination",className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Destination Address"}),(0,b.jsx)("input",{id:"withdraw-destination",type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"Enter Algorand address","aria-label":"Destination Algorand address","aria-describedby":"destination-help",className:"w-full rounded-lg border border-zinc-300 bg-white px-4 py-2 font-mono text-sm text-zinc-900 placeholder-zinc-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100"}),(0,b.jsx)("p",{id:"destination-help",className:"mt-1 text-xs text-zinc-600 dark:text-zinc-400",children:"Enter the Algorand address to receive the funds"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{h(!1),p(null),j(""),l("")},className:"flex-1 rounded-lg border border-zinc-300 bg-white px-4 py-2 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:"Cancel"}),(0,b.jsx)("button",{onClick:q,disabled:m||!i||!k,className:"flex-1 rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600 disabled:opacity-50",children:m?"Processing...":"Withdraw"})]})]})})]})}function h({balance:a,address:c}){return(0,b.jsx)(g,{balance:a,address:c})}function i(){let[a,g]=(0,c.useState)("0"),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)("all");async function q(){l(!0);try{let a=(await (0,d.getWalletConnect)()).getConnectedAddress();if(!a)return void l(!1);j(a);let b=await (0,d.getWallet)(),c=await b.getBalance(a,e.appConfig.asaId);g(c.formatted||"0"),n([])}catch(a){console.error("Error loading wallet data:",a)}finally{l(!1)}}(0,c.useEffect)(()=>{q()},[]);let r=m.filter(a=>"all"===o||a.type===o);return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-zinc-900 dark:to-zinc-800",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:"My Wallet"}),(0,b.jsx)(f.default,{href:"/",className:"text-sm text-blue-600 hover:underline dark:text-blue-400",children:"â† Back to Home"})]}),(0,b.jsxs)("div",{className:"mb-8 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 p-6 text-white shadow-lg",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm opacity-90",children:"Total Balance"}),(0,b.jsx)("span",{className:"text-3xl",children:"ðŸ’°"})]}),k?(0,b.jsx)("div",{className:"h-12 w-48 animate-pulse rounded bg-white/20"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-2 text-4xl font-bold",children:[a," PLY"]}),(0,b.jsxs)("div",{className:"text-sm opacity-90",children:["â‰ˆ â‚¬",(.02*parseFloat(a)).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"mb-8 grid grid-cols-2 gap-4",children:[(0,b.jsx)("button",{onClick:()=>{alert("Top-up functionality coming soon!")},className:"rounded-lg bg-blue-500 px-6 py-3 font-medium text-white transition-colors hover:bg-blue-600",children:"Add PLY"}),(0,b.jsx)(h,{balance:parseFloat(a),address:i})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Recent Transactions"}),(0,b.jsxs)("select",{value:o,onChange:a=>p(a.target.value),className:"rounded-lg border border-zinc-300 bg-white px-3 py-1 text-sm dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,b.jsx)("option",{value:"all",children:"All"}),(0,b.jsx)("option",{value:"topup",children:"Top-up"}),(0,b.jsx)("option",{value:"payment",children:"Payment"}),(0,b.jsx)("option",{value:"withdrawal",children:"Withdrawal"})]})]}),0===r.length?(0,b.jsxs)("div",{className:"py-8 text-center text-zinc-500 dark:text-zinc-400",children:[(0,b.jsx)("p",{children:"No transactions yet"}),(0,b.jsx)("p",{className:"mt-2 text-sm",children:"Your transaction history will appear here"})]}):(0,b.jsx)("div",{className:"space-y-2",children:r.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 p-4 dark:border-zinc-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:"topup"===a.type?"âž•":"payment"===a.type?"âž–":"ðŸ’¸"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:a.type}),(0,b.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:new Date(a.date).toLocaleString()})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:`font-semibold ${"topup"===a.type?"text-green-600":"text-red-600"}`,children:["topup"===a.type?"+":"-","â‚¬",a.amount.toFixed(2)]}),(0,b.jsx)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:a.status})]})]},c))})]}),i&&(0,b.jsxs)("div",{className:"mt-8 rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,b.jsx)("div",{className:"mb-2 text-sm text-zinc-600 dark:text-zinc-400",children:"Wallet Address"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("code",{className:"font-mono text-sm text-zinc-900 dark:text-zinc-100",children:[i.slice(0,8),"...",i.slice(-8)]}),(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(i),alert("Address copied to clipboard!")},className:"rounded-lg bg-zinc-200 px-3 py-1 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-300 dark:bg-zinc-700 dark:text-zinc-100 dark:hover:bg-zinc-600",children:"Copy"})]})]})]})})}a.s(["default",()=>i],710)}];

//# sourceMappingURL=app_wallet_page_tsx_f7925e28._.js.map