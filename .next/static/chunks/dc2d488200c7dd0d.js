(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87593,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(74959),n=e.i(61664),r=e.i(22016);function s({balance:e,address:n,onClose:r}){let[s,d]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),[o,x]=(0,a.useState)(""),[m,b]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null);async function g(){if(!n)return void h("Wallet not connected");let t=parseFloat(l);if(isNaN(t)||t<=0)return void h("Please enter a valid amount");if(t<.001)return void h("Minimum withdrawal amount is 0.001 PLY");if(t>e)return void h("Insufficient balance");if(!o||o.length<10)return void h("Please enter a valid destination address");if(!/^[A-Z2-7]{58}$/.test(o))return void h("Invalid Algorand address format. Address must be 58 characters and base32 encoded.");b(!0),h(null);try{let e=await (0,i.getWallet)(),a=(await (0,i.getWalletConnect)()).getWalletConnector(),n=Math.floor(1e6*t);await e.transfer({to:o,amount:n,signer:a}),alert(`Successfully withdrew ${t} PLY to ${o.slice(0,8)}...`),d(!1),c(""),x(""),r?.()}catch(e){h(e.message||"Withdrawal failed. Please try again.")}finally{b(!1)}}return(0,a.useEffect)(()=>{if(s)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e);function e(e){"Escape"===e.key&&(d(!1),h(null),c(""),x(""))}},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>d(!0),className:"rounded-lg border-2 border-zinc-300 bg-white px-6 py-3 font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100 dark:hover:bg-zinc-700",children:"Withdraw PLY"}),s&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-zinc-200 bg-white p-6 shadow-lg dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Withdraw PLY"}),(0,t.jsx)("button",{onClick:()=>{d(!1),h(null),c(""),x("")},className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300","aria-label":"Close modal",children:"âœ•"})]}),u&&(0,t.jsx)("div",{id:"withdraw-error",role:"alert",className:"mb-4 rounded-lg bg-red-50 p-3 text-sm text-red-600 dark:bg-red-900/20 dark:text-red-400",children:u}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Available Balance"}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-300 bg-zinc-50 p-3 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:[e.toFixed(2)," PLY"]}),(0,t.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["â‰ˆ â‚¬",(.02*e).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"withdraw-amount",className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Amount to Withdraw"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{id:"withdraw-amount",type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"0.00",step:"0.01",min:"0",max:e,"aria-label":"Withdrawal amount","aria-describedby":u?"withdraw-error":void 0,className:"flex-1 rounded-lg border border-zinc-300 bg-white px-4 py-2 text-zinc-900 placeholder-zinc-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100"}),(0,t.jsx)("button",{onClick:function(){c(e.toFixed(2))},className:"rounded-lg border border-zinc-300 bg-white px-4 py-2 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:"Max"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"withdraw-destination",className:"mb-2 block text-sm font-medium text-zinc-900 dark:text-zinc-100",children:"Destination Address"}),(0,t.jsx)("input",{id:"withdraw-destination",type:"text",value:o,onChange:e=>x(e.target.value),placeholder:"Enter Algorand address","aria-label":"Destination Algorand address","aria-describedby":"destination-help",className:"w-full rounded-lg border border-zinc-300 bg-white px-4 py-2 font-mono text-sm text-zinc-900 placeholder-zinc-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100"}),(0,t.jsx)("p",{id:"destination-help",className:"mt-1 text-xs text-zinc-600 dark:text-zinc-400",children:"Enter the Algorand address to receive the funds"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{d(!1),h(null),c(""),x("")},className:"flex-1 rounded-lg border border-zinc-300 bg-white px-4 py-2 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:"Cancel"}),(0,t.jsx)("button",{onClick:g,disabled:m||!l||!o,className:"flex-1 rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-600 disabled:opacity-50",children:m?"Processing...":"Withdraw"})]})]})})]})}function d({balance:e,address:a}){return(0,t.jsx)(s,{balance:e,address:a})}function l(){let[e,s]=(0,a.useState)("0"),[l,c]=(0,a.useState)(null),[o,x]=(0,a.useState)(!0),[m,b]=(0,a.useState)([]),[u,h]=(0,a.useState)("all");async function g(){x(!0);try{let e=(await (0,i.getWalletConnect)()).getConnectedAddress();if(!e)return void x(!1);c(e);let t=await (0,i.getWallet)(),a=await t.getBalance(e,n.appConfig.asaId);s(a.formatted||"0"),b([])}catch(e){console.error("Error loading wallet data:",e)}finally{x(!1)}}(0,a.useEffect)(()=>{g()},[]);let p=m.filter(e=>"all"===u||e.type===u);return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-zinc-900 dark:to-zinc-800",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"mb-2 text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:"My Wallet"}),(0,t.jsx)(r.default,{href:"/",className:"text-sm text-blue-600 hover:underline dark:text-blue-400",children:"â† Back to Home"})]}),(0,t.jsxs)("div",{className:"mb-8 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 p-6 text-white shadow-lg",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm opacity-90",children:"Total Balance"}),(0,t.jsx)("span",{className:"text-3xl",children:"ðŸ’°"})]}),o?(0,t.jsx)("div",{className:"h-12 w-48 animate-pulse rounded bg-white/20"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-2 text-4xl font-bold",children:[e," PLY"]}),(0,t.jsxs)("div",{className:"text-sm opacity-90",children:["â‰ˆ â‚¬",(.02*parseFloat(e)).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mb-8 grid grid-cols-2 gap-4",children:[(0,t.jsx)("button",{onClick:()=>{alert("Top-up functionality coming soon!")},className:"rounded-lg bg-blue-500 px-6 py-3 font-medium text-white transition-colors hover:bg-blue-600",children:"Add PLY"}),(0,t.jsx)(d,{balance:parseFloat(e),address:l})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Recent Transactions"}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"rounded-lg border border-zinc-300 bg-white px-3 py-1 text-sm dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"topup",children:"Top-up"}),(0,t.jsx)("option",{value:"payment",children:"Payment"}),(0,t.jsx)("option",{value:"withdrawal",children:"Withdrawal"})]})]}),0===p.length?(0,t.jsxs)("div",{className:"py-8 text-center text-zinc-500 dark:text-zinc-400",children:[(0,t.jsx)("p",{children:"No transactions yet"}),(0,t.jsx)("p",{className:"mt-2 text-sm",children:"Your transaction history will appear here"})]}):(0,t.jsx)("div",{className:"space-y-2",children:p.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 p-4 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"topup"===e.type?"âž•":"payment"===e.type?"âž–":"ðŸ’¸"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:e.type}),(0,t.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:new Date(e.date).toLocaleString()})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:`font-semibold ${"topup"===e.type?"text-green-600":"text-red-600"}`,children:["topup"===e.type?"+":"-","â‚¬",e.amount.toFixed(2)]}),(0,t.jsx)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:e.status})]})]},a))})]}),l&&(0,t.jsxs)("div",{className:"mt-8 rounded-lg border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mb-2 text-sm text-zinc-600 dark:text-zinc-400",children:"Wallet Address"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("code",{className:"font-mono text-sm text-zinc-900 dark:text-zinc-100",children:[l.slice(0,8),"...",l.slice(-8)]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(l),alert("Address copied to clipboard!")},className:"rounded-lg bg-zinc-200 px-3 py-1 text-sm font-medium text-zinc-900 transition-colors hover:bg-zinc-300 dark:bg-zinc-700 dark:text-zinc-100 dark:hover:bg-zinc-600",children:"Copy"})]})]})]})})}e.s(["default",()=>l],87593)}]);