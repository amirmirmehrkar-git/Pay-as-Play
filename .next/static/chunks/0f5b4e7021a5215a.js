(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39150,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a(){let[e,a]=(0,r.useState)([]),[n,i]=(0,r.useState)("all"),[l,s]=(0,r.useState)("date"),[d,o]=(0,r.useState)("all");function c(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?`${t}h ${r}m ${a}s`:r>0?`${r}m ${a}s`:`${a}s`}(0,r.useEffect)(()=>{try{let e=localStorage.getItem("media_history"),t=e?JSON.parse(e):[];"all"!==n&&(t=t.filter(e=>e.category===n));let r=new Date;"all"!==d&&(t=t.filter(e=>{let t=new Date(e.watchedAt);switch(d){case"today":return t.toDateString()===r.toDateString();case"week":let a=new Date(r.getTime()-6048e5);return t>=a;case"month":let n=new Date(r.getTime()-2592e6);return t>=n;default:return!0}})),t.sort((e,t)=>{switch(l){case"date":return new Date(t.watchedAt).getTime()-new Date(e.watchedAt).getTime();case"duration":return t.duration-e.duration;case"cost":return t.cost-e.cost;case"platform":return e.platform.localeCompare(t.platform);default:return 0}}),a(t)}catch(e){console.error("Error loading media history:",e),a([])}},[n,d]);let x={video:"Video",audio:"Audio",learn:"Learning",entertainment:"Games"},h=e.reduce((e,t)=>e+t.duration,0),m=e.reduce((e,t)=>e+t.cost,0),u=e.reduce((e,t)=>e+t.watchCount,0);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-gradient-to-br from-blue-50 to-cyan-50 p-4 dark:border-zinc-800 dark:from-blue-900/20 dark:to-cyan-900/20",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Total Time"}),(0,t.jsx)("div",{className:"mt-1 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:c(h)})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-gradient-to-br from-green-50 to-emerald-50 p-4 dark:border-zinc-800 dark:from-green-900/20 dark:to-emerald-900/20",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Total Spent"}),(0,t.jsxs)("div",{className:"mt-1 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:["â‚¬",m.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-gradient-to-br from-purple-50 to-pink-50 p-4 dark:border-zinc-800 dark:from-purple-900/20 dark:to-pink-900/20",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Total Watches"}),(0,t.jsx)("div",{className:"mt-1 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:u})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 rounded-xl border border-zinc-200 bg-white/80 p-4 backdrop-blur-sm dark:border-zinc-800 dark:bg-zinc-900/80",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Category:"}),(0,t.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"rounded-lg border-2 border-zinc-200 bg-white px-3 py-1.5 text-sm font-medium transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"video",children:"Video"}),(0,t.jsx)("option",{value:"audio",children:"Audio"}),(0,t.jsx)("option",{value:"learn",children:"Learning"}),(0,t.jsx)("option",{value:"entertainment",children:"Entertainment"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Date:"}),(0,t.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"rounded-lg border-2 border-zinc-200 bg-white px-3 py-1.5 text-sm font-medium transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,t.jsx)("option",{value:"all",children:"All Time"}),(0,t.jsx)("option",{value:"today",children:"Today"}),(0,t.jsx)("option",{value:"week",children:"This Week"}),(0,t.jsx)("option",{value:"month",children:"This Month"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Sort:"}),(0,t.jsxs)("select",{value:l,onChange:e=>s(e.target.value),className:"rounded-lg border-2 border-zinc-200 bg-white px-3 py-1.5 text-sm font-medium transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,t.jsx)("option",{value:"date",children:"Date"}),(0,t.jsx)("option",{value:"duration",children:"Duration"}),(0,t.jsx)("option",{value:"cost",children:"Cost"}),(0,t.jsx)("option",{value:"platform",children:"Platform"})]})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===e.length?(0,t.jsx)("div",{className:"rounded-xl border border-zinc-200 bg-zinc-50 p-8 text-center dark:border-zinc-800 dark:bg-zinc-800/50",children:(0,t.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400",children:"No media history found"})}):e.map(e=>(0,t.jsx)("div",{className:"group rounded-2xl border-2 border-zinc-200 bg-gradient-to-br from-white to-zinc-50/50 p-5 shadow-sm transition-all hover:shadow-xl hover:-translate-y-1 dark:border-zinc-800 dark:from-zinc-900 dark:to-zinc-800/50",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex h-14 w-14 shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-100 to-cyan-100 text-3xl shadow-md dark:from-blue-900/30 dark:to-cyan-900/30",children:e.platformIcon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:e.title}),(0,t.jsx)("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:x[e.category]})]}),(0,t.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:[e.platform," â€¢ Watched ",e.watchCount," ",1===e.watchCount?"time":"times"]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-xs text-zinc-500 dark:text-zinc-500",children:[(0,t.jsxs)("span",{children:["â±ï¸ ",c(e.duration)]}),(0,t.jsxs)("span",{children:["ðŸ’° â‚¬",e.cost.toFixed(2)]}),(0,t.jsxs)("span",{children:["ðŸ“… ",new Date(e.watchedAt).toLocaleDateString()]}),(0,t.jsxs)("span",{children:["ðŸ• ",new Date(e.watchedAt).toLocaleTimeString()]})]})]})]})},e.id))})]})}e.s(["default",()=>a])},14887,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(74959);function n({timeWatchedData:e=[],costData:a=[],monthlySpend:n=[]}){let i=(0,r.useRef)(null),l=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let{days:e,timeData:t,costData:r}=(()=>{let e=[],t=[],r=[];for(let a=6;a>=0;a--){let n=new Date;n.setDate(n.getDate()-a),e.push(n.toLocaleDateString("en-US",{weekday:"short"})),t.push(Math.floor(120*Math.random())+30),r.push(5*Math.random()+1)}return{days:e,timeData:t,costData:r}})();if(i.current&&function(e,t,r,a){let n=e.getContext("2d");if(!n)return;let i=e.width,l=e.height,s=i-80,d=l-80;n.clearRect(0,0,i,l),n.strokeStyle="#e4e4e7",n.lineWidth=1,n.beginPath(),n.moveTo(40,40),n.lineTo(40,l-40),n.lineTo(i-40,l-40),n.stroke();let o=Math.max(...r,1);for(let e=0;e<=5;e++){let t=40+d/5*e;n.strokeStyle="#f4f4f5",n.beginPath(),n.moveTo(40,t),n.lineTo(i-40,t),n.stroke()}n.strokeStyle="#3b82f6",n.lineWidth=2,n.beginPath(),r.forEach((e,t)=>{let a=40+s/(r.length-1||1)*t,i=l-40-e/o*d;0===t?n.moveTo(a,i):n.lineTo(a,i)}),n.stroke(),n.fillStyle="#3b82f6",r.forEach((e,t)=>{let a=40+s/(r.length-1||1)*t;n.beginPath(),n.arc(a,l-40-e/o*d,4,0,2*Math.PI),n.fill()}),n.fillStyle="#71717a",n.font="12px sans-serif",n.textAlign="center",t.forEach((e,r)=>{let a=40+s/(t.length-1||1)*r;n.fillText(e,a,l-40+20)})}(i.current,e,t,0),l.current&&function(e,t,r,a){let n=e.getContext("2d");if(!n)return;let i=e.width,l=e.height,s=i-80,d=l-80;n.clearRect(0,0,i,l),n.strokeStyle="#e4e4e7",n.lineWidth=1,n.beginPath(),n.moveTo(40,40),n.lineTo(40,l-40),n.lineTo(i-40,l-40),n.stroke();let o=Math.max(...r,1),c=s/r.length-10;r.forEach((e,t)=>{let a=40+s/r.length*t+5,i=e/o*d;n.fillStyle="#10b981",n.fillRect(a,l-40-i,c,i)}),n.fillStyle="#71717a",n.font="12px sans-serif",n.textAlign="center",t.forEach((e,t)=>{let a=40+s/r.length*t+s/r.length/2;n.fillText(e,a,l-40+20)})}(l.current,e,r,0),s.current){let e=["Jan","Feb","Mar","Apr","May","Jun"],t=e.map(()=>50*Math.random()+20);!function(e,t,r,a){let n=e.getContext("2d");if(!n)return;let i=e.width,l=e.height,s=i-80,d=l-80;n.clearRect(0,0,i,l),n.strokeStyle="#e4e4e7",n.lineWidth=1,n.beginPath(),n.moveTo(40,40),n.lineTo(40,l-40),n.lineTo(i-40,l-40),n.stroke();let o=Math.max(...r,1);n.fillStyle="rgba(139, 92, 246, 0.3)",n.beginPath(),r.forEach((e,t)=>{let a=40+s/(r.length-1||1)*t;0===t&&n.moveTo(a,l-40),n.lineTo(a,l-40-e/o*d)}),n.lineTo(i-40,l-40),n.closePath(),n.fill(),n.strokeStyle="#8b5cf6",n.lineWidth=2,n.beginPath(),r.forEach((e,t)=>{let a=40+s/(r.length-1||1)*t,i=l-40-e/o*d;0===t?n.moveTo(a,i):n.lineTo(a,i)}),n.stroke(),n.fillStyle="#71717a",n.font="12px sans-serif",n.textAlign="center",t.forEach((e,r)=>{let a=40+s/(t.length-1||1)*r;n.fillText(e,a,l-40+20)})}(s.current,e,t,0)}},[e,a,n]),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsx)("h3",{className:"mb-3 text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Time Watched Over Time"}),(0,t.jsx)("canvas",{ref:i,width:300,height:200,className:"w-full"})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsx)("h3",{className:"mb-3 text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Cost per Content"}),(0,t.jsx)("canvas",{ref:l,width:300,height:200,className:"w-full"})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-4 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsx)("h3",{className:"mb-3 text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Monthly Spend"}),(0,t.jsx)("canvas",{ref:s,width:300,height:200,className:"w-full"})]})]})}var i=e.i(39150);function l(){let[e,l]=(0,r.useState)("0h 0m"),[s,d]=(0,r.useState)("â‚¬0.00"),[o,c]=(0,r.useState)(0),[x,h]=(0,r.useState)(!0),[m,u]=(0,r.useState)("month"),[b,g]=(0,r.useState)([]),[f,p]=(0,r.useState)([]);async function z(){h(!0);try{let e=(await (0,a.getWalletConnect)()).getConnectedAddress();if(!e)return void h(!1);let t=await (0,a.getAnalytics)(),r=await t.getUserAnalytics({userId:e,dateRange:m}),n=Math.floor((r.totalTimeWatched||0)/3600),i=Math.floor((r.totalTimeWatched||0)%3600/60);l(`${n}h ${i}m`),d(`â‚¬${(r.totalSpent||0).toFixed(2)}`),c(r.contentCount||0),g([{id:"1",platform:"Netflix",title:"Sample Movie",category:"video",timeWatched:3600,cost:1.2,date:"2025-11-16"},{id:"2",platform:"Spotify",title:"Sample Podcast",category:"audio",timeWatched:1800,cost:.6,date:"2025-11-15"},{id:"3",platform:"Coursera",title:"Sample Course",category:"learn",timeWatched:5400,cost:2.7,date:"2025-11-14"}]),p([{id:"1",code:"WELCOME10",type:"discount",value:10,validUntil:"2025-12-31",used:!1},{id:"2",code:"FREEMONTH",type:"free",value:30,validUntil:"2025-11-30",used:!0},{id:"3",code:"BONUS50",type:"bonus",value:50,validUntil:"2025-12-15",used:!1}])}catch(e){console.error("Error loading analytics:",e)}finally{h(!1)}}return(0,r.useEffect)(()=>{z()},[m]),(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-zinc-900 dark:to-zinc-800",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:"Analytics Dashboard"}),(0,t.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"rounded-lg border border-zinc-300 bg-white px-4 py-2 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-100",children:[(0,t.jsx)("option",{value:"today",children:"Today"}),(0,t.jsx)("option",{value:"week",children:"This Week"}),(0,t.jsx)("option",{value:"month",children:"This Month"}),(0,t.jsx)("option",{value:"year",children:"This Year"})]})]}),(0,t.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Time Watched"}),(0,t.jsx)("span",{className:"text-2xl",children:"â±ï¸"})]}),x?(0,t.jsx)("div",{className:"h-8 w-24 animate-pulse rounded bg-zinc-200 dark:bg-zinc-700"}):(0,t.jsx)("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:e})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Total Spent"}),(0,t.jsx)("span",{className:"text-2xl",children:"ðŸ’°"})]}),x?(0,t.jsx)("div",{className:"h-8 w-24 animate-pulse rounded bg-zinc-200 dark:bg-zinc-700"}):(0,t.jsx)("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:s})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Content Count"}),(0,t.jsx)("span",{className:"text-2xl",children:"ðŸ“º"})]}),x?(0,t.jsx)("div",{className:"h-8 w-24 animate-pulse rounded bg-zinc-200 dark:bg-zinc-700"}):(0,t.jsx)("div",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100",children:o})]})]}),(0,t.jsxs)("div",{className:"mb-8 rounded-2xl border-2 border-zinc-200 bg-gradient-to-br from-white to-zinc-50/50 p-6 shadow-xl dark:border-zinc-800 dark:from-zinc-900 dark:to-zinc-800/50",children:[(0,t.jsx)("h2",{className:"mb-6 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Analytics Charts"}),(0,t.jsx)(n,{})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(i.default,{})}),(0,t.jsxs)("div",{className:"mb-8 rounded-2xl border-2 border-zinc-200 bg-gradient-to-br from-white to-zinc-50/50 p-6 shadow-xl dark:border-zinc-800 dark:from-zinc-900 dark:to-zinc-800/50",children:[(0,t.jsx)("h2",{className:"mb-6 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Coupons & Gift Codes"}),x?(0,t.jsx)("div",{className:"py-8 text-center text-zinc-500 dark:text-zinc-400",children:"Loading..."}):0===f.length?(0,t.jsx)("div",{className:"py-8 text-center text-zinc-500 dark:text-zinc-400",children:"No coupons available"}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map(e=>(0,t.jsxs)("div",{className:`rounded-lg border p-4 ${e.used?"border-zinc-200 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-800/50":"discount"===e.type?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"free"===e.type?"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20":"border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-900/20"}`,children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${"discount"===e.type?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"free"===e.type?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}`,children:"discount"===e.type?"Discount":"free"===e.type?"Free":"Bonus"}),e.used&&(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Used"})]}),(0,t.jsx)("div",{className:"mb-2 font-mono text-lg font-bold text-zinc-900 dark:text-zinc-100",children:e.code}),(0,t.jsx)("div",{className:"mb-2 text-sm text-zinc-600 dark:text-zinc-400",children:"discount"===e.type?`${e.value}% off`:"free"===e.type?`Free ${e.value} days`:`${e.value} PLY bonus`}),(0,t.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["Valid until: ",e.validUntil]}),!e.used&&(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.code),alert(`Coupon code ${e.code} copied to clipboard!`)},className:"mt-3 w-full rounded-lg bg-blue-500 px-3 py-1 text-xs font-medium text-white transition-colors hover:bg-blue-600",children:"Copy Code"})]},e.id))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border-2 border-zinc-200 bg-gradient-to-br from-white to-zinc-50/50 p-6 shadow-xl dark:border-zinc-800 dark:from-zinc-900 dark:to-zinc-800/50",children:[(0,t.jsx)("h2",{className:"mb-6 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Export Data"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{className:"rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:from-blue-600 hover:to-cyan-600 hover:shadow-xl hover:scale-105 active:scale-95",children:"Export as CSV"}),(0,t.jsx)("button",{className:"rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:from-green-600 hover:to-emerald-600 hover:shadow-xl hover:scale-105 active:scale-95",children:"Download PDF Report"}),(0,t.jsx)("button",{className:"rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 text-sm font-semibold text-white shadow-lg transition-all hover:from-purple-600 hover:to-pink-600 hover:shadow-xl hover:scale-105 active:scale-95",children:"Share with Partner"})]})]})]})})}e.s(["default",()=>l],14887)}]);